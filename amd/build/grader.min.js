function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);if(b)d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable});c.push.apply(c,d)}return c}function _objectSpread(a){for(var b=1,c;b<arguments.length;b++){c=null!=arguments[b]?arguments[b]:{};if(b%2){ownKeys(Object(c),!0).forEach(function(b){_defineProperty(a,b,c[b])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(a,Object.getOwnPropertyDescriptors(c))}else{ownKeys(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}}return a}function _defineProperty(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}define ("local_customgrader/grader",["local_customgrader/vendor-vue","local_customgrader/vendor-vue-router","local_customgrader/vendor-vuex","local_customgrader/vendor-vue-resource","local_customgrader/vendor-vue-js-modal","local_customgrader/vendor-vue-flex","local_customgrader/vendor-vue-toasted","local_customgrader/vendor-loading-indicator","local_customgrader/vendor-lodash","local_customgrader/grader-store","local_customgrader/grader-enums","local_customgrader/grader-utils","local_customgrader/grader-component-main","local_customgrader/grader-router","local_customgrader/grader-filters","local_customgrader/grader-constants","local_customgrader/Chart","local_customgrader/vue-chartjs"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){a.use(b);a.use(c);a.use(d);a.use(e.default,{dialog:!0});a.use(f);a.use(g.default,{iconPack:"custom-class"});var q={UPDATE_CATEGORY_OK:"updateCategoryOK",ADD_ELEMENT_OK:"addElementOK"},r={EDIT_CATEGORY:"edit-category",EDIT_ITEM:"edit-item",ADD_ELEMENT:"add-element"},s={name:"CATEGOR\xCDA",id:0},t={name:"\xCDTEM",id:1},u={name:"PARCIAL",id:2},v=[s,t,u],w=new c.Store(j.store),x=a.component("select-aggregation",{template:"\n            <select \n            v-model=\"aggregation\" \n            @change=\"changeAggregation($event)\" \n            id=\"aggregation\">\n                <option \n                v-for=\"_aggregation in aggregations\"\n                v-bind:selected=\"_aggregation.id == aggregation\"\n                v-bind:value=\"_aggregation.id\"\n                >{{_aggregation.name}}</option>\n            </select>\n        ",props:["initialAggregation"],data:function data(){return{aggregation:k.aggregations.SIMPLE,aggregations:p.aggregations}},created:function created(){this.aggregation=this.initialAggregation?this.initialAggregation:this.aggregation},methods:{changeAggregation:function changeAggregation(a){this.$emit("changeAggregation",a.target.value)}}}),y=a.component("edit-category-form",{template:"    \n                <div style=\"width: 600px; height: 300px;\" class=\"edit-category-form\">\n                    <form style=\"width: 570px; height: 270px;\">\n                        <h3 :style=\"{ 'text-align': 'center' }\">Editando Categor\xEDa:</h3>\n                        <br />\n                        <label for=\"categoryFullName\">\n                            Nombre de la categoria:  \n                        </label>\n                        <input :disabled=\"isCourseCategory\" id=\"categoryFullName\" v-model=\"categoryFullName\">\n                        <br />\n                        <label for=\"aggregation\">\n                        Tipo de calificaci\xF3n:\n                        </label>\n                        <select-aggregation \n                                v-bind:initialAggregation=\"category.aggregation\"\n                                v-on:changeAggregation=\"changeAggregation\">\n                        </select-aggregation>\n                        <br />\n                        <br />\n                        <div style=\"text-align:center; bottom:50px;\">\n                                <button :style=\"boton\" type=\"button\" v-on:click=\"updateCategory\">Guardar</button>\n                        </div>\n                    </form>\n                </div>\n            ",data:function data(){return{categoryFullName:"",gradeTypeId:0,aggregations:p.aggregations,boton:{"background-color":"#cd1f32",color:"white"}}},computed:_objectSpread({},c.mapState(["selectedCategoryId"]),{},c.mapGetters({category:"selectedCategory"}),{isCourseCategory:function isCourseCategory(){return 1==this.category.depth}}),mounted:function mounted(){this.categoryFullName=this.category.fullname;this.aggregation=this.category.aggregation},methods:{setAggretation:function setAggretation(a){this.aggregation=a},changeAggregation:function changeAggregation(a){this.aggregation=a},updateCategory:function updateCategory(){var a=this;this.$store.dispatch(j.actions.UPDATE_CATEGORY,_objectSpread({},this.category,{fullname:this.categoryFullName,aggregation:this.aggregation,aggregationcoef:50})).then(function(){a.$emit(q.UPDATE_CATEGORY_OK)}).catch(function(){a.$toasted.show("Ha habido un error guardando la categoria",{duration:3e3,theme:"bubble"})})}}}),z=a.component("close-modal-button",{template:"\n        <i class=\"fa fa-2x fa-times-circle\" v-bind:style=\"closeButtonStyle\"  @click=\"$modal.hide(modalName)\"></i>\n        ",props:{modalName:{type:String,required:!0}},data:function data(){return{closeButtonStyle:{position:"absolute",top:"10px",right:"10px"}}}}),A=a.component("modal-add-element",{template:"\n       <modal \n        v-bind:name=\"modalName\"\n        v-bind:transition=\"'nice-modal-fade'\"\n        :draggable=\"true\"\n        >\n            <add-element-form v-on:addElementOK=\"$modal.hide(modalName)\"></add-element-form>\n            <close-modal-button v-bind:modalName=\"modalName\"></close-modal-button>\n       </modal>\n       ",data:function data(){return{modalName:r.ADD_ELEMENT}}}),B=a.component("modal-edit-category",{template:"<modal\n                    v-bind:name=\"modalName\" \n                    v-bind:transition=\"'nice-modal-fade'\"\n                    :draggable=\"true\"\n                    >\n                        <edit-category-form   v-on:updateCategoryOK=\"$modal.hide(modalName)\"></edit-category-form>\n                        <close-modal-button v-bind:modalName=\"modalName\"></close-modal-button>\n                   </modal>\n       ",data:function data(){return{modalName:r.EDIT_CATEGORY}}}),C=a.component("add-element-form",{template:"\n        <div class=\"add-element-form\">\n           <form>\n           <h2 :style=\"{ 'text-align': 'center' }\">A\xF1adir elemento</h2>\n           <label></label>\n           <select id=\"elementType\" v-model=\"elementTypeId\">\n               <option v-for=\"elementType in elementTypes\" v-bind:value=\"elementType.id\">\n                {{elementType.name}}\n               </option>\n           </select>\n            <br/>\n           <label :style=\"{ 'text-align': 'center' }\" for=\"elementName\">\n            Nombre del elemento:\n            </label>\n            <input id=\"elementName\" v-model=\"elementName\">\n           <br />\n            <template v-if=\"parentCategory.aggregation == weigthedMeanOfGrades\">\n                <label for=\"elementAggregationCoef\">\n                    Peso: \n                </label>\n                        <input \n            placeholder=\"Ingrese un valor entre 1 y 100\" \n            id=\"elementAggregationCoef\" \n            v-model=\"elementAggregationCoef\" type=\"number\"\n            v-on:keypress=\"isNumber($event)\">\n            </template>\n            <br/>\n            <template v-if=\"elementTypeId === categoryElementTypeId || elementTypeId === partialExamElementId\">\n                <label >\n                    Tipo de agregaci\xF3n\n                </label>\n                <select-aggregation\n                    v-bind:changeAggregation=\"changeAggregation\"\n                />\n            </template>\n            <br />\n            <div style=\"text-align:center\">\n                <button :style=\"boton\" type=\"button\" v-on:click=\"createElement()\">A\xF1adir</button>\n            </div>\n           </form>\n       </div>\n       ",data:function data(){return{boton:{"background-color":"#cd1f32",color:"white"},elementTypes:v,categoryElementTypeId:s.id,partialExamElementId:u.id,elementTypeId:t.id,elementName:"",aggregation:k.aggregations.SIMPLE,elementAggregationCoef:""}},computed:_objectSpread({},c.mapState(["selectedCategoryId","course"]),{},c.mapGetters(["selectedCategory"]),{parentCategory:function parentCategory(){return this.selectedCategory},weigthedMeanOfGrades:function weigthedMeanOfGrades(){return k.aggregations.PROMEDIO}}),methods:{isNumber:function isNumber(a){a=a?a:window.event;var b=a.which?a.which:a.keyCode;if(31<b&&(48>b||57<b)&&46!==b){a.preventDefault()}else{return!0}},changeAggregation:function changeAggregation(a){this.aggregation=a},extractItem:function extractItem(){return{itemname:this.elementName,aggregationcoef:this.elementAggregationCoef,parent_category:this.parentCategory.id,courseid:this.course.id}},extractPartialExam:function extractPartialExam(){return{itemname:this.elementName,aggregationcoef:this.elementAggregationCoef,parent_category:this.parentCategory.id,courseid:this.course.id,aggregation:this.aggregation}},extractCategory:function extractCategory(){return{fullname:this.elementName,courseid:this.course.id,parent_category:this.parentCategory.id,aggregation:this.aggregation}},createItem:function createItem(){var a=this,b=this.extractItem();this.$store.dispatch(j.actions.ADD_ITEM,b).then(function(){a.$emit(q.ADD_ELEMENT_OK);a.$toasted.show("Se ha a\xF1adido el item '".concat(b.itemname,"'"),{duration:3e3,icon:"fa fa-check"});a.$router.go()}).catch(function(){a.$toasted.show("Ha ocurrido un error guardando el nuevo item.",{duration:3e3,theme:"bubble"})})},createCoursePartialExam:function createCoursePartialExam(){var a=this,b=this.extractPartialExam();this.$store.dispatch(j.actions.ADD_PARTIAL_EXAM,b).then(function(){a.$emit(q.ADD_ELEMENT_OK);a.$toasted.show("Se ha a\xF1adido el parcial '".concat(b.itemname,"'"),{duration:3e3,icon:"fa fa-check"});a.$router.go()}).catch(function(){a.$toasted.show("Ha ocurrido un error guardando el nuevo parcial.",{duration:3e3,theme:"bubble"})})},createCategory:function createCategory(){var a=this,b=this.extractCategory(),c={category:b,weight:this.elementAggregationCoef};this.$store.dispatch(j.actions.ADD_CATEGORY,c).then(function(){a.$emit(q.ADD_ELEMENT_OK);a.$toasted.show("Se ha a\xF1adido la categoria '".concat(b.fullname,"'"),{duration:3e3,icon:"fa fa-check"});a.$router.go()}).catch(function(){a.$toasted.show("Ha ocurrido un error guardando la nueva categoria.",{duration:3e3,theme:"bubble"})})},createElement:function createElement(){if(this.elementTypeId===t.id){this.createItem()}else if(this.elementTypeId===s.id){this.createCategory()}else if(this.elementTypeId===u.id){this.createCoursePartialExam()}}}}),D=a.component("item-mini-menu",{template:"\n                <div>\n                    <i class=\"fa fa-trash\" v-on:click=\"showDeleteItemDialog()\"></i>\n                </div>\n            ",props:["itemId"],methods:{deleteItem:function deleteItem(){var a=this;return this.$store.dispatch(j.actions.DELETE_ITEM,this.itemId).then(function(){a.$toasted.show("Se ha borrado el item",{duration:3e3});a.$router.go()}).catch(function(){a.$toasted.show("Ha habido un error al borrar el item, no se ha borrado",{duration:3e3,theme:"bubble"})})},showDeleteItemDialog:function showDeleteItemDialog(){var a=this;this.$modal.show("dialog",{title:"Eliminaci\xF3n de item",text:"Estas a punto de eliminar un item",buttons:[{title:"Borrar",handler:function handler(){a.deleteItem().finally(function(){return a.$modal.hide("dialog")})}},{title:"Cancelar"}]})}}}),E=a.component("category-mini-menu",{template:"\n                <div class =\"category-mini-menu\" v-bind:style=\"style\">\n                    <i class=\"fa fa-edit\" v-on:click=\"showEditDialog\"></i>\n                    <i class=\"fa fa-plus\" v-on:click=\"showAddElementDialog\"></i>\n                    <i class=\"fa fa-trash\" v-show=\"showDelete\"\" v-on:click=\"showDeleteElementDialog\"></i>\n                </div>\n            ",props:{categoryId:[Number,String],showDelete:{type:Boolean,required:!1,default:!0},allowEditName:{type:Boolean,required:!1,default:!0}},data:function data(){return{style:{display:"grid",gridTemplateColumns:"repeat(3, max-content)",gridColumnGap:"8px"}}},computed:_objectSpread({},c.mapGetters(["categoryById"]),{category:function category(){return this.categoryById(this.categoryId)}}),methods:{deleteCategory:function deleteCategory(){var a=this;return this.$store.dispatch(j.actions.DELETE_CATEGORY,this.categoryId).then(function(){a.$toasted.show("Se ha borrado la categoria",{duration:3e3});a.$router.go()}).catch(function(){a.$toasted.show("Ha habido un error al borrar la categoria, no se ha borrado",{duration:3e3,theme:"bubble"})})},showDeleteElementDialog:function showDeleteElementDialog(){var a=this;this.$modal.show("dialog",{title:"Eliminaci\xF3n de categoria",text:"Estas a punto de eliminar una categoria",buttons:[{title:"Borrar",handler:function handler(){a.deleteCategory().finally(function(){return a.$modal.hide("dialog")})}},{title:"Cancelar"}]})},showEditDialog:function showEditDialog(){this.$store.commit(j.mutations.SET_SELECTED_CATEGORY_ID,this.category.id);this.$modal.show(r.EDIT_CATEGORY)},showAddElementDialog:function showAddElementDialog(){this.$store.commit(j.mutations.SET_SELECTED_CATEGORY_ID,this.category.id);this.$modal.show(r.ADD_ELEMENT)}}}),F=a.component("th-course",{template:"\n            <th \n            v-bind:colspan=\"colspan\"\n            @mouseover=\"showMenu = true\"\n            @mouseout=\"showMenu = false\"\n            >\n           \n                <flex-row align-v=\"center\" v-bind:style=\"editZoneStyles\" >\n                    <span class=\"gradeitemheader\">        \n                    {{course.fullname}}       \n                    </span>\n                    <category-mini-menu v-bind:showDelete=\"false\" v-bind:categoryId=\"category.id\"  v-show=\"showMenu\"></category-mini-menu>\n                </flex-row> \n                </th>\n            </th>\n       ",props:["colspan"],data:function data(){return{showMenu:!1,editZoneStyles:{display:"grid",gridTemplateColumns:"repeat(2, max-content)",gridColumnGap:"5px"}}},computed:_objectSpread({},c.mapState(["course"]),{},c.mapGetters(["courseLevel","categoryById"]),{courseCategoryId:function courseCategoryId(){return this.courseLevel.object.id},category:function category(){return this.categoryById(this.courseCategoryId)}})}),G=a.component("course-mini-menu",{template:"\n                <div v-bind:style=\"style\">\n                    <i class=\"fa fa-plus\" v-on:click=\"showAddElementDialog\"></i>\n                </div>\n            ",props:["categoryId"],data:function data(){return{style:{display:"grid",gridTemplateColumns:"repeat(3, max-content)",gridColumnGap:"8px"}}},computed:_objectSpread({},c.mapGetters(["categoryById"]),{category:function category(){return this.categoryById(this.categoryId)}}),methods:{showAddElementDialog:function showAddElementDialog(){this.$store.commit(j.mutations.SET_SELECTED_CATEGORY_ID,this.category.id);this.$modal.show(r.ADD_ELEMENT)}}}),H=a.component("th-category",{template:"    \n            <th\n            :title=\"category.fullname\"\n            class=\"th-category\"\n            @mouseover=\"showMenu = true\"\n            @mouseout=\"showMenu = false\" \n            v-bind:colspan=\"childSize\" >\n                <flex-row align-v=\"center\"  v-bind:style=\"editZoneStyles\">\n                    <input v-model=\"catName\" :class=\"getCatClass\" @focus=\"catFocus\" @blur=\"catBlur\" @keyup.enter=\"$event.target.blur()\"></input>\n                    <input\n                     v-model=\"catWeight\" \n                     :class=\"catGetWeightClass\"\n                     @focus=\"catWFocus\" @blur=\"catWBlur\"\n                     @keyup.enter=\"$event.target.blur()\"\n                     v-if=\"parentCategory.aggregation == weightedAggregation\"\n                     v-on:keypress=\"isNumber($event)\"\n                     ></input>\n                    <category-mini-menu v-bind:categoryId=\"category.id\" v-show=\"showMenu\"></category-mini-menu>\n                </flex-row>\n            </th>\n       ",created:function created(){var a=this.category.fullname,b=30,c=document.createElement("div");c.innerHTML=a;var d=c.textContent;this.catName=d.length>b?d.slice(0,b)+"...":d;this.catWeight=this.$options.filters.round(this.aggregationCoef,2)+"%"},props:["element"],data:function data(){return{showFullName:!1,getCatClass:"catnotfocused",catGetWeightClass:"catwnotfocused",catName:"",catWeight:"",editZoneStyles:{"max-height":"45px"},showMenu:!1}},computed:_objectSpread({},c.mapGetters(["categoryById","categoryChildSize"]),{},c.mapState(["items"]),{category:function category(){return this.categoryById(this.element.object.id)},childSize:function childSize(){return this.categoryChildSize(this.category.id)},categoryGradeItem:function categoryGradeItem(){return this.items[this.category.grade_item]},aggregationCoef:function aggregationCoef(){return this.categoryGradeItem.aggregationcoef},parentCategory:function parentCategory(){return this.categoryById(this.category.parent)},weightedAggregation:function weightedAggregation(){return k.aggregations.PROMEDIO}}),methods:{isNumber:function isNumber(a){a=a?a:window.event;var b=a.which?a.which:a.keyCode;if(31<b&&(48>b||57<b)&&46!==b){a.preventDefault()}else{return!0}},catFocus:function catFocus(){this.getCatClass="catwithfocus";this.showFullName=!0;this.uptadeCatName()},catBlur:function catBlur(){this.getCatClass="catnotfocused";this.showFullName=!1;this.updateCategoryName()},catWFocus:function catWFocus(){this.catGetWeightClass="catwwithfocus";this.showFullName=!0;this.updateWeight()},catWBlur:function catWBlur(){this.catGetWeightClass="catwnotfocused";this.showFullName=!1;this.saveAggregationCoef()},updateCategoryName:function updateCategoryName(){this.$store.dispatch(j.actions.UPDATE_CATEGORY,_objectSpread({},this.category,{fullname:this.catName}))},saveAggregationCoef:function saveAggregationCoef(){this.$store.dispatch(j.actions.UPDATE_ITEM,_objectSpread({},this.categoryGradeItem,{aggregationcoef:this.catWeight}))},uptadeCatName:function uptadeCatName(){if(this.showFullName){this.catName=this.category.fullname}else{this.catName=this.$options.filters.trunc(this.category.fullname,30)}},updateWeight:function updateWeight(){this.catWeight=this.$options.filters.round(this.aggregationCoef,2);if("catwnotfocused"===this.catGetWeightClass){this.catWeight+="%"}}}}),I=a.component("item-actions-mini",{template:"\n        \n        ",props:["itemId"]}),J=a.component("th-student-names",{template:"\n       <th class=\"th-student-names\" :style=\"stickyStyles\"> \n           <flex-row>\n               <a v-on:click=\"changeOrderToLastame()\">Apellidos</a> \n               <span>/ </span>\n               <a v-on:click=\"changeOrderToName\">Nombres</a>\n           </flex-row> \n       </th>\n       ",data:function data(){return{lastNameDirectionAsc:!0,firstNameDirectionAsc:!0,stickyStyles:{position:"sticky",top:"0",left:"0","background-clip":"padding-box","z-index":"999999"}}},methods:{changeOrderToLastame:function changeOrderToLastame(){this.$store.commit(j.mutations.SET_STUDENT_SORT_METHOD,{name:k.sortStudentMethods.LAST_NAME,order:this.lastNameDirectionAsc?k.sortDirection.ASC:"desc"});this.lastNameDirectionAsc=!this.lastNameDirectionAsc},changeOrderToName:function changeOrderToName(){this.$store.commit(j.mutations.SET_STUDENT_SORT_METHOD,{name:k.sortStudentMethods.FIRST_NAME,order:this.firstNameDirectionAsc?k.sortDirection.ASC:"desc"});this.firstNameDirectionAsc=!this.firstNameDirectionAsc}}}),K=a.component("tr-items",{template:"\n                    <tr class=\"tr-items\">\n                    <th-student-names></th-student-names>\n                    <th colspan=\"1\" v-for=\"additionalColumnAtFirst in additionalColumnsAtFirst\" v-show=\"!additionalColumnAtFirst.hide\">{{additionalColumnAtFirst.text}}</th>\n                    <template v-for=\"(itemId, index) in orderedItemIds\">       \n                        <th-item-category \n                        v-if=\"items[itemId].itemtype === 'category'\" \n                        v-bind:itemId=\"items[itemId].id\" \n                        v-bind:colspan=\"1\"\n                        :style=\"stickyStyles\"\n                        ></th-item-category> \n                        \n                        <th-item-manual-and-mod \n                        v-if=\"items[itemId].itemtype === 'manual' || items[itemId].itemtype === 'mod'\"  \n                        v-bind:itemId=\"items[itemId].id\" \n                        ></th-item-manual-and-mod>\n                     </template>\n                     <th colspan=\"1\" v-for=\"additionalColumnAtEnd in additionalColumnsAtEnd\">{{additionalColumnAtEnd.text}}</th>\n                     </tr>\n   ",computed:_objectSpread({},c.mapGetters({orderedItemIds:"itemOrderIds"}),{},c.mapState(["additionalColumnsAtFirst","additionalColumnsAtEnd","items"])),data:function data(){return{stickyStyles:{}}}});a.component("editable",{template:"<div contenteditable=\"true\" @blur=\"update\">{{content}}<span>{{sufix}}</span></div>",props:["content","sufix"],methods:{getContent:function getContent(a){return a.target.innerText.replace(this.sufix,"")},update:function update(a){this.$emit("update",this.getContent(a))}}});var L=a.component("th-item-manual-and-mod",{template:"         \n                <th class=\"th-item-manual-and-mod\"\n                v-cloak\n                 @mouseover=\"showMenuItems = true\"\n                 @mouseout=\"showMenuItems = false\"\n                 :title=\"item.itemname\"\n                ><!--v-on:click=\"deleteItem(item.id)\"-->\n                <flex-row v-bind:style=\"editZoneStyles\" align-v=\"center\">\n                    <input v-model=\"content\" :class=\"getClass\" @focus=\"focus\" @blur=\"blur\" @keydown.enter=\"saveNameChanges\" @keyup.enter=\"$event.target.blur()\"></input>\n                    <input\n                     v-model=\"weight\" \n                     :class=\"getWeightClass\"\n                     @focus=\"wfocus\" @blur=\"wblur\"\n                     @keyup.enter=\"$event.target.blur()\"\n                     v-if=\"parentCategory.aggregation == weightedAggregation\"\n                     v-on:keypress=\"isNumber($event)\"\n                     ></input>\n                    <item-mini-menu v-show=\"showMenuItems\" v-bind:itemId=\"item.id\"></item-mini-menu>\n                </flex-row>\n                </th>\n   ",created:function created(){var a=this.item.itemname,b=18,c=document.createElement("div");c.innerHTML=a;var d=c.textContent;this.content=d.length>b?d.slice(0,b)+"...":d;this.weight=this.$options.filters.round(this.item.aggregationcoef,2)+"%"},data:function data(){return{showMenuItems:!1,showFullName:!1,getClass:"inotfocused",getWeightClass:"iwnotfocused",content:"",weight:0,editZoneStyles:{"max-height":"20px"}}},props:["itemId"],methods:_objectSpread({isNumber:function isNumber(a){a=a?a:window.event;var b=a.which?a.which:a.keyCode;if(31<b&&(48>b||57<b)&&46!==b){a.preventDefault()}else{return!0}},focus:function focus(){this.getClass="iwithfocus";this.showFullName=!0;this.uptadeContent()},blur:function blur(){this.getClass="inotfocused";this.showFullName=!1;if(this.content!==this.item.itemname){this.saveNameChanges()}else{this.uptadeContent()}},wfocus:function wfocus(){this.getWeightClass="iwwithfocus";this.updateWeight()},wblur:function wblur(){this.getWeightClass="iwnotfocused";if(parseFloat(this.weight)!==parseFloat(this.item.aggregationcoef)){this.saveAggregationCoefChanges()}else{this.updateWeight()}}},c.mapActions({deleteItem:j.actions.DELETE_ITEM}),{saveNameChanges:function saveNameChanges(){this.$store.dispatch(j.actions.UPDATE_ITEM,_objectSpread({},this.item,{itemname:this.content}))},saveAggregationCoefChanges:function saveAggregationCoefChanges(){this.$store.dispatch(j.actions.UPDATE_ITEM,_objectSpread({},this.item,{aggregationcoef:this.weight}))},uptadeContent:function uptadeContent(){console.log("update");if(this.showFullName){this.content=this.item.itemname}else{var a=this.item.itemname,b=18,c=document.createElement("div");c.innerHTML=a;var d=c.textContent;this.content=d.length>b?d.slice(0,b)+"...":d}},updateWeight:function updateWeight(){console.log(this.item.aggregationcoef);this.weight=this.$options.filters.round(this.item.aggregationcoef,2);if("iwnotfocused"===this.getWeightClass){this.weight+="%"}}}),computed:_objectSpread({},c.mapState(["items"]),{},c.mapGetters(["categoryById"]),{item:function item(){return this.items[this.itemId]},parentCategory:function parentCategory(){return this.categoryById(this.item.categoryid)},weightedAggregation:function weightedAggregation(){return k.aggregations.PROMEDIO}})}),M=a.component("th-item-category",{template:"         \n                <th class=\"th-item-category\"v-bind:colspan=\"colspan\"\n                 :title=\"itemName\">\n                            {{itemName | trunc(20, '...')}}\n                </th>\n   ",props:["itemId","colspan"],computed:_objectSpread({},c.mapState(["items"]),{},c.mapGetters(["categoryById"]),{item:function item(){return this.items[this.itemId]},categoryParent:function categoryParent(){return this.categoryById(this.item.iteminstance)},itemName:function itemName(){return"TOTAL "+this.categoryParent.fullname}})}),N=a.component("th-student",{template:"\n                <th class=\"th-student\"scope=\"row\" v-bind:style=\"stickyStyles\">\n                    {{studentFullName}}\n                </th>\n                ",props:["studentId"],computed:_objectSpread({},c.mapGetters(["studentById"]),{},c.mapGetters({students:"studentSet"}),{student:function student(){return this.studentById(this.studentId)},studentFullName:function studentFullName(){return this.student.lastname+" "+this.student.firstname}}),data:function data(){return{stickyStyles:{position:"sticky",left:"0","background-clip":"padding-box","min-width":"400px!important"}}}}),O=a.component("td-grade",{template:"\n                <td  class=\"td-grade\"\n                v-bind:style=\"this.inputDisabled? { 'background-color': '#e1e4fe' } : { }\"> \n                <!--{{item.itemtype}}-->\n                <input \n                class=\"grade-input\"\n                v-bind:disabled=\"inputDisabled\" \n                type=\"number\"\n                v-bind:tabindex=\"tabIndex\" \n                v-bind:step=\"step\"  \n                v-bind:max=\"grade.rawgrademax\" \n                v-bind:min=\"grade.rawgrademin\" \n                v-bind:size=\"decimalPlaces + 1\"\n                v-on:keypress=\"isNumber($event)\"\n                v-model.lazy=\"finalGrade\">\n                </td>\n                ",props:["gradeId","studentIndex","itemIndex"],methods:_objectSpread({},c.mapActions({updateGrade:j.actions.UPDATE_GRADE}),{isNumber:function isNumber(a){a=a?a:window.event;var b=a.which?a.which:a.keyCode;if(31<b&&(48>b||57<b)&&46!==b){a.preventDefault()}else{return!0}}}),computed:_objectSpread({},c.mapState(["grades","items","course","decimalPlaces"]),{step:function step(){return Math.pow(10,-this.decimalPlaces)}},c.mapGetters(["studentsCount"]),{tabIndex:function tabIndex(){return(this.itemIndex+1)*this.studentsCount+this.studentIndex+1},inputDisabled:function inputDisabled(){return"category"===this.item.itemtype||"course"===this.item.itemtype},grade:function grade(){return this.grades[this.gradeId]},item:function item(){return this.items[this.grade.itemid]},finalGrade:{get:function get(){console.log("getFInal");return l.round(this.grade.finalgrade,this.decimalPlaces)},set:function set(a){console.log("setFinal");this.grade.finalgrade=a;this.updateGrade(this.grade,this.course.id)}}})}),P=a.component("tr-grades",{template:"\n                <tr \n                v-bind:class=\"{is_ases: student.is_ases}\" \n                v-bind:title=\"student.is_ases? 'El estudiante pertenece al programa ASES' : ''\"\n                >\n                    <th-student v-bind:studentId=\"student.id\"></th-student>\n                    <td >{{student.username}}</td>\n                    <td-grade \n                    v-for=\"(gradeId, index) in studentGradeIdsOrdered\" \n                    :key=\"gradeId\"\n                    v-bind:studentIndex=\"studentIndex\"\n                    v-bind:itemIndex=\"index\"\n                    v-bind:gradeId=\"gradeId\"\n                    >\n                    </td-grade>\n                   \n                </tr>\n                ",props:["studentId","studentIndex"],computed:_objectSpread({},c.mapState(["students","grades"]),{},c.mapGetters(["itemOrderIds"]),{student:function student(){return this.students[this.studentId]},studentGradeIdsOrdered:function studentGradeIdsOrdered(){return l.orderGradeIdsInItemSetOrder(this.student.gradeIds,this.grades,this.itemOrderIds)}})}),Q=a.component("popup-weight",{template:"\n                <div id=\"page-content\" class=\"row pb-3 d-print-block\">\n            <div id=\"region-main-box\" class=\"col-12\">\n\n                <section id=\"region-main\">\n                    <div class=\"card\">\n                        <div class=\"card-body\">\n                            \n                            <span class=\"notifications\" id=\"user-notifications\"></span>\n                            <div role=\"main\"><span id=\"maincontent\"></span><div data-rel=\"fatalerror\" class=\"box py-3 errorbox alert alert-warning\">\n                                            <p class=\"errormessage\">Advertencia: El total de los porcentajes dentro de una categoria o curso no suman 100, moodle los tomar\xE1 como peso en vez de porcentaje</p>\n                                            <p class=\"errorcode\"><a href=\"https://docs.moodle.org/311/en/Grade_aggregation#Weighted_mean\" target=\"_blank\">Mas informacion sobre esta advertencia</a></p></div>\n                                            <div class=\"continuebutton\">\n    \n</div></div>\n                            \n                            \n                        </div>\n                    </div>\n                </section>\n            </div>\n        </div>\n    </div>\n                "});a.filter(o.round.name,o.round.func);a.filter(o.trun.name,o.trun.func);var R=new b({routes:n.routes}),S=new a({store:w,router:R,components:{ThCourse:F,EditCategoryForm:y,ThCategory:H,TrItems:K,ThItemManualAndMod:L,PopUpWeight:Q}});return{init:function init(){S.$mount("#app");$(document).ready(function(){})}}});
//# sourceMappingURL=grader.min.js.map
